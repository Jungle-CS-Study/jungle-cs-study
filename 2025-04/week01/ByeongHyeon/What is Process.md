> # What is Process?
> 출처 : 운영체제 아주 쉬운 세 가지 이야기

# 프로세스란 무엇인가?
프로세스는 OS에서 제공해주는 핵심 개념 중 하나로, **실행 중인 프로그램**을 운영체제 관점에서 의미한다. 프로세스는 운영체제에서 관리하는 작업의 단위로 사용되기도 한다.

# 여러 개의 프로세스를 관리하는 방법
위에서 프로세스를 실행 중인 프로그램으로 설명했는데, 컴퓨터를 실행하면 하나의 프로그램만 실행되는 것이 아니라, 여러 개의 프로그램을 실행할 수 있다. 이는 여러 개의 프로세스가 작동하는 것과 동일한데, 어떻게 프로세스를 관리할 수 있을까?

## CPU의 가상화 : 시분할 기법(Time-sharing)
현대의 운영체제는 시분할 기법을 통해서 프로세스를 관리한다. 이 기법은 프로세스 하나를 중단시키고 다른 프로세스를 실행한다. 또, 반복하면서 짧은 시간 동안에 여러 개의 프로세스를 변경하면서 실행하게 된다.
> 이때 CPU에서 실행 중인 프로세스를 다른 프로세스로 변경하는 행위를 **컨텍스트 스위치(Context Switch)**라고 한다.

### 컨텍스트 스위치는 언제 일어나는가?
컨텍스트 스위치가 발생하는 상황을 생각해보자.

- 웹 브라우저에서 웹 페이지를 로드하는 동안 CPU는 다른 프로세스로 전환하여 작업 처리
- 파일을 저장하는 I/O 작업이 진행되는 동안 CPU는 다른 프로세스의 계산 작업을 수행

**컨텍스트 스위치는 멀티태스킹의 핵심이지만, 빈번한 스위칭은 성능 저하의 원인이 될 수 있다. Like 양날의 검..!**

## 운영체제에 관여하는 규칙 : 정책(Policy)
정책은 운영체제에서 지능에 해당한다. 프로세스, 쓰레드 등 다양한 개념들은 관리하기 위한 방법이 여럿 존재하는데 이때 사용되는 규칙들을 정책이라고 한다. 위 컨텍스트 스위칭에서도 "어떤 프로세스를 실행할 것인가"를 정하는 정책을 스케쥴링 정책(Scheduling Policy)라고 한다.
## 프로세스를 구성하고 있는 요소
프로세스는 **실행 중인 프로그램**을 의미한다. 즉, 프로세스는 유동적으로 변경되는 특징을 가진다. N초 전의 구성 요소와 지금의 구성 요소는 다를 수 있다. 변경되지 않는 구성 요소에는 무엇이 있을까?

1. **주소공간** : 프로그램의 명령어, 코드를 저장하고 읽을 수 있는 공간
2. **레지스터** : 명령어들은 레지스터 공간을 읽거나 갱신한다.

레지스터 중에서 특정한 목적으로 사용되기에 명칭이 있는 레지스터들이 있는데, 대표적으로 스택 포인터(Stack Pointer), 명령어 포인터(Instruction Pointer), 프로그램 카운터(Program Counter) 등이 있다.

### 프로세스의 주소 공간 구성 요소
프로세스의 주소 공간은 일반적으로 다음과 같은 섹션으로 구분됩니다:

- **코드 영역(Code Section)**: 실행 가능한 프로그램 코드를 저장
- **데이터 영역(Data Section)**: 전역, 정적 변수를 저장
- **힙(Heap)**: 동적으로 할당되는 메모리 영역 (malloc, new 등으로 할당)
- **스택(Stack)**: 함수 호출 정보, 지역 변수, 반환 주소 등이 저장

# 컴퓨터에서 프로세스는 어떻게 생성될까?
프로세스는 어떻게 생성이 될까. 우리는 EXE 확장자 파일을 실행한다. 그러면 운영체제는 EXE 확장자 파일 안에 있는 데이터를 읽어와 프로그램을 실행하게 된다.

1. 프로그램 코드와 정적 데이터를 메모리, 프로세스의 주소 공간에 로드(Load)한다.
2. 운영체제에서 프로그램 실행을 위한 스택(Stack)과 힙(Heap) 영역을 생성하고 초기화한다.
3. 입출력과 관계된 초기화 작업을 실행한다.
4. 프로그램의 Entry-Point를 시작으로 코드를 실행하여 프로그램을 실행한다.

초기 운영체제들은 프로그램 실행 전에 코드와 데이터를 모두 메모리에 탑재했으나, 현대의 운영체제는 필요한 부분만 메모리에 탑재한다. 이를 위해서 페이징과 스와핑에 대한 이해가 필요하지만 지금 다루지는 않는다.

## 프로세스를 관리하기 위한 상태(State)
프로세스 상태의 개념은 초기 컴퓨터 과학부터 언급되었다. 이를 단순하게 표현하면 3가지로 나타낼 수 있다.
   1. 실행(Running) : 프로세스는 CPU에서 실행중이다. 즉, CPU는 프로세스의 명령어를 수행하고 있다.
   2. 준비(Ready) : 프로세스가 실행할 준비는 되었으나, 모종의 이유로 대기 중인 상태를 의미한다.
   3. 대기(Blocked) : 프로세스가 다른 이벤트를 기다리고 있는 상황으로, 잠시 프로세스의 수행을 중단시킨 상황이다. 예시로 입출력을 위해서 프로세스는 대기 상태로 돌아가고 CPU에서는 다른 프로세스를 실행할 수 있다.

**현대 운영체제에서 사용하는 상태와는 다르다.**