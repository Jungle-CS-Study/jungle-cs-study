# CS 스터디 정리 자료

## 주제: 대용량 트래픽을 처리하는 아키텍처 설계 전략

### 목적

대용량 트래픽 환경에서 시스템이 어떻게 병목을 처리하고, 어떤 인프라 구조를 선택해야 하는지에 대한 설계 전략과 그 기반이 되는 컴퓨터 과학 이론을 이해한다.

---

## 1. 문제 정의

### 트래픽 급증 상황 예시

* 게임 서버에서 유저 동시 접속자 수 폭증
* 실시간 채팅/메시징 처리
* 이커머스 결제 이벤트 트래픽 몰림

### 주요 문제

* 단일 서버 자원 고갈
* 트랜잭션 처리 지연
* 시스템 장애 전이 (SPOF)

---

## 2. 대응 전략: 수직 확장 vs 수평 확장

### 수직 확장 (Scale-Up)

* 하나의 서버에 더 많은 CPU, RAM 추가
* GC 튜닝, 멀티스레딩, 캐시 사용 등 코드 수준 최적화

#### 장단점 요약

* ✅ 구성 간단, IPC 빠름, 일관된 처리 용이
* ❌ 확장성 낮음, 단일 장애 위험, 비용 증가율 높음

### 수평 확장 (Scale-Out)

* 여러 서버로 분산 처리
* 서비스 단위 분리(MSA), 부하 분산기 사용

#### 장단점 요약

* ✅ 확장성 뛰어남, 장애 분산 가능, 유연한 배포
* ❌ 분산 트랜잭션 복잡, 데이터 정합성 문제, 운영 난이도 증가

---

## 3. 인프라 구조 선택: VM vs Proxmox 컨테이너 클러스터

### VM 기반 클러스터

* 각 노드가 독립된 VM 형태
* 하이퍼바이저 기반의 완전 가상화

#### 장단점 요약

* ✅ OS 수준 격리, 보안 우수
* ❌ 리소스 낭비, 느린 배포, 복잡한 관리

### Proxmox + LXC 기반 클러스터

* 경량 컨테이너를 클러스터 노드로 구성
* Proxmox VE로 중앙관리

#### 장단점 요약

* ✅ 리소스 효율, 빠른 배포, HA 구성 쉬움
* ❌ 커널 공유로 완전 격리 아님, 일부 보안 우려

---

## 4. 실제 구성 예시

### 채팅 서버 구조 예

* HAProxy → 컨테이너 기반 Node 서버 분산
* Redis pub/sub 사용한 메시지 브로커 구성
* 모니터링: Prometheus + Grafana

```text
[ User Request ]
      ↓
[ Load Balancer (HAProxy) ]
      ↓
[ Container Node 1 ] [ Container Node 2 ] ...
      ↓
[ Redis Cluster / DB ]
```

---

## 5. 연관된 CS 개념 정리

| 항목      | 관련 CS 이론                          |
| ------- | --------------------------------- |
| 수직 확장   | OS: 메모리 구조, GC 동작, 멀티스레드          |
| 수평 확장   | 분산 시스템: CAP 이론, Consistency 모델    |
| VM 구조   | 하이퍼바이저, 가상 메모리, context switch 비용 |
| 컨테이너 구조 | namespace, cgroup, 프로세스 격리        |
| 부하 분산   | 네트워크: 라운드로빈, 해시 기반 분배, 큐잉 이론      |

---

## 6. 상황별 선택 기준

| 조건             | 선택 방향               |
| -------------- | ------------------- |
| 리소스 한계 빠른 대응   | 수직 확장               |
| 고가용성, 유연성      | 수평 확장               |
| 완전한 격리, 다양한 OS | VM 기반 클러스터          |
| 자원 효율, 빠른 배포   | LXC 기반 Proxmox 클러스터 |

---